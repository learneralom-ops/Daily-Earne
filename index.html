
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Earning - Earn Money Online</title>
    <meta name="description" content="Earn money daily by completing simple tasks, watching ads, and inviting friends. Start earning now!">
    <meta name="keywords" content="earn money online, daily earning, watch ads earn money, make money online">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>
    
    <!-- Ads SDK -->
    <!-- Mone Tag Ads SDK -->
    <script src='//libtl.com/sdk.js' data-zone='8954258' data-sdk='show_8954258'></script>
    
    <!-- Giga Pub Ads SDK -->
    <script src="https://ad.gigapub.tech/script?id=3247"></script>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'primary': '#3B82F6',
                        'secondary': '#10B981',
                        'accent': '#F59E0B',
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s ease-in-out infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'coin-spin': 'coinSpin 2s linear infinite',
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                    },
                    keyframes: {
                        coinSpin: {
                            '0%': { transform: 'rotateY(0deg)' },
                            '100%': { transform: 'rotateY(360deg)' }
                        },
                        fadeIn: {
                            '0%': { opacity: 0, transform: 'translateY(10px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' }
                        },
                        slideUp: {
                            '0%': { opacity: 0, transform: 'translateY(20px)' },
                            '100%': { opacity: 1, transform: 'translateY(0)' }
                        }
                    }
                }
            }
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f6f8ff 0%, #f0f4ff 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body.dark {
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            color: #e2e8f0;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.1);
        }
        
        .dark .glass-card {
            background: rgba(30, 41, 59, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .gradient-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .gradient-success {
            background: linear-gradient(135deg, #0ba360 0%, #3cba92 100%);
        }
        
        .gradient-warning {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }
        
        .gradient-info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }
        
        .text-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .coin-icon {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .tab-active {
            position: relative;
        }
        
        .tab-active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 6px;
            height: 6px;
            background: #3B82F6;
            border-radius: 50%;
        }
        
        /* Page transition */
        .page {
            display: none;
            animation: fadeIn 0.3s ease-out;
        }
        
        .page.active {
            display: block;
        }
        
        /* Notification animation */
        @keyframes slideIn {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .notification-slide {
            animation: slideIn 0.3s ease-out;
        }
        
        /* Progress bar animation */
        @keyframes progressFill {
            from { width: 0%; }
            to { width: var(--progress); }
        }
        
        .progress-animate {
            animation: progressFill 1.5s ease-out forwards;
        }
        
        /* Ad watch animation */
        @keyframes countdown {
            from { width: 100%; }
            to { width: 0%; }
        }
        
        .countdown-bar {
            animation: countdown 5s linear forwards;
        }
        
        /* Taka symbol styling */
        .taka-symbol {
            font-family: Arial, sans-serif;
            font-weight: bold;
        }
        
        /* Profile picture styling */
        .profile-pic {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border: 3px solid #667eea;
        }
        
        /* Loading spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* File input styling */
        .file-input-container {
            position: relative;
            overflow: hidden;
            display: inline-block;
        }
        
        .file-input-container input[type=file] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 dark:text-gray-100">
    <div id="app" class="min-h-screen pb-20 max-w-md mx-auto">
        <!-- Header -->
        <header class="sticky top-0 z-40 bg-white/80 dark:bg-gray-800/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-700 py-4 px-6 shadow-sm">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 rounded-full gradient-primary flex items-center justify-center">
                        <i class="fas fa-coins text-white"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800 dark:text-white">Daily Earning</h1>
                        <p class="text-xs text-gray-500 dark:text-gray-300" id="pageTitle">Earn money online</p>
                    </div>
                </div>
                <div class="flex items-center space-x-3">
                    <button id="themeToggle" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                        <i class="fas fa-moon text-gray-600 dark:text-yellow-400"></i>
                    </button>
                    <button id="logoutBtn" class="w-10 h-10 rounded-full bg-red-100 dark:bg-red-800 flex items-center justify-center hover:bg-red-200 dark:hover:bg-red-700 transition hidden">
                        <i class="fas fa-sign-out-alt text-red-600 dark:text-red-300"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Auth Pages -->
        <div id="authContainer" class="px-4 py-6">
            <!-- Login Page -->
            <div id="loginPage" class="page active">
                <div class="text-center mb-8">
                    <div class="w-20 h-20 rounded-full gradient-primary flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-coins text-white text-3xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Welcome Back!</h2>
                    <p class="text-gray-600 dark:text-gray-300 mt-2">Login to your account</p>
                </div>
                
                <div class="glass-card rounded-2xl p-6">
                    <form id="loginForm">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email or Phone Number</label>
                                <input type="text" id="loginEmailPhone" required 
                                       class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"
                                       placeholder="Enter email or phone number">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                                <div class="relative">
                                    <input type="password" id="loginPassword" required 
                                           class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"
                                           placeholder="Enter password">
                                    <button type="button" id="toggleLoginPassword" class="absolute right-3 top-3 text-gray-500">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <label class="flex items-center">
                                    <input type="checkbox" id="rememberMe" 
                                           class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                    <span class="ml-2 text-sm text-gray-600 dark:text-gray-300">Remember me</span>
                                </label>
                                <a href="#" id="forgotPassword" class="text-sm text-blue-600 dark:text-blue-400 hover:underline">Forgot password?</a>
                            </div>
                            
                            <button type="submit" id="loginBtn" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 rounded-xl hover:opacity-90 transition flex items-center justify-center">
                                <span>Login</span>
                                <div id="loginSpinner" class="loader ml-2 hidden" style="width: 20px; height: 20px;"></div>
                            </button>
                            
                            <div class="text-center">
                                <p class="text-gray-600 dark:text-gray-300">Don't have an account? 
                                    <button id="showSignupBtn" class="text-blue-600 dark:text-blue-400 font-medium hover:underline">Sign Up</button>
                                </p>
                            </div>
                        </div>
                    </form>
                    
                    <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <p class="text-center text-gray-600 dark:text-gray-300 text-sm mb-4">Or continue with</p>
                        <div class="grid grid-cols-2 gap-3">
                            <button class="flex items-center justify-center p-3 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition">
                                <i class="fab fa-google text-red-600 mr-2"></i>
                                <span class="text-sm font-medium">Google</span>
                            </button>
                            <button class="flex items-center justify-center p-3 border border-gray-300 dark:border-gray-600 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition">
                                <i class="fab fa-facebook text-blue-600 mr-2"></i>
                                <span class="text-sm font-medium">Facebook</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 text-center">
                    <p class="text-xs text-gray-500 dark:text-gray-400">By continuing, you agree to our 
                        <a href="#" class="text-blue-600 dark:text-blue-400">Terms of Service</a> and 
                        <a href="#" class="text-blue-600 dark:text-blue-400">Privacy Policy</a>
                    </p>
                </div>
            </div>

            <!-- Signup Page -->
            <div id="signupPage" class="page">
                <div class="flex items-center mb-6">
                    <button id="backToLogin" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mr-3 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                        <i class="fas fa-arrow-left text-gray-600 dark:text-gray-300"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Create Account</h2>
                </div>
                
                <div class="glass-card rounded-2xl p-6">
                    <form id="signupForm">
                        <div class="space-y-4">
                            <!-- Profile Picture Upload -->
                            <div class="text-center mb-4">
                                <div class="relative inline-block">
                                    <img id="profilePreview" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" 
                                         alt="Profile" class="profile-pic rounded-full mx-auto mb-3">
                                    <div class="file-input-container">
                                        <button type="button" class="absolute bottom-0 right-0 bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 transition">
                                            <i class="fas fa-camera"></i>
                                        </button>
                                        <input type="file" id="profilePicture" accept="image/*" class="cursor-pointer">
                                    </div>
                                </div>
                                <p class="text-sm text-gray-600 dark:text-gray-300">Upload profile picture</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Full Name</label>
                                <input type="text" id="fullName" required 
                                       class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"
                                       placeholder="Enter your full name">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email Address</label>
                                <input type="email" id="signupEmail" required 
                                       class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"
                                       placeholder="Enter your email">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Phone Number</label>
                                <input type="tel" id="phoneNumber" 
                                       class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"
                                       placeholder="Enter phone number (optional)">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                                <div class="relative">
                                    <input type="password" id="signupPassword" required 
                                           class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"
                                           placeholder="Create password (min. 6 characters)">
                                    <button type="button" id="toggleSignupPassword" class="absolute right-3 top-3 text-gray-500">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Must be at least 6 characters</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Confirm Password</label>
                                <div class="relative">
                                    <input type="password" id="confirmPassword" required 
                                           class="w-full px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-800 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition"
                                           placeholder="Confirm your password">
                                    <button type="button" id="toggleConfirmPassword" class="absolute right-3 top-3 text-gray-500">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <input type="checkbox" id="agreeTerms" required 
                                       class="w-4 h-4 mt-1 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                                <label for="agreeTerms" class="ml-2 text-sm text-gray-600 dark:text-gray-300">
                                    I agree to the <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline">Terms of Service</a> and <a href="#" class="text-blue-600 dark:text-blue-400 hover:underline">Privacy Policy</a>
                                </label>
                            </div>
                            
                            <button type="submit" id="signupBtn" class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 rounded-xl hover:opacity-90 transition flex items-center justify-center">
                                <span>Create Account</span>
                                <div id="signupSpinner" class="loader ml-2 hidden" style="width: 20px; height: 20px;"></div>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Main Content - Different Pages (Only shown after login) -->
        <main id="mainContainer" class="px-4 py-6 hidden">
            <!-- Home Page -->
            <div id="homePage" class="page active">
                <!-- Balance Card -->
                <div class="glass-card rounded-2xl p-6 mb-6 gradient-primary text-white shadow-xl">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <p class="text-sm opacity-90">Total Balance</p>
                            <h2 id="balanceAmount" class="text-4xl font-bold mt-1">
                                <span class="taka-symbol text-3xl">৳</span> <span id="currentBalance">0</span>
                            </h2>
                        </div>
                        <div class="w-16 h-16 rounded-full bg-white/20 flex items-center justify-center">
                            <i class="fas fa-wallet text-2xl"></i>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3 mb-6">
                        <button id="depositBtn" class="flex-1 bg-white text-blue-600 font-semibold py-3 rounded-xl hover:bg-gray-50 transition active:scale-95">
                            <i class="fas fa-plus-circle mr-2"></i> Deposit
                        </button>
                        <button id="withdrawBtn" class="flex-1 bg-white/20 text-white font-semibold py-3 rounded-xl hover:bg-white/30 transition active:scale-95">
                            <i class="fas fa-dollar-sign mr-2"></i> Withdraw
                        </button>
                    </div>
                </div>
<p>Daily Ads Count
 <span class="text-xs text-gray-500 dark:text-gray-400 mt-1" id="dailyAdsCounter">(0/15</span> </p>
                
                <!-- Quick Actions -->
                <div class="grid grid-cols-4 gap-3 mb-6">
                    <button class="quick-action" data-action="watch-ads">
                        <div class="w-16 h-16 rounded-xl bg-blue-100 dark:bg-blue-900 flex items-center justify-center mb-2">
                            <i class="fas fa-ad text-blue-600 dark:text-blue-300 text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-gray-800 dark:text-gray-200">Watch Ads</span>
                    </button>
                    
                    <button class="quick-action" data-action="watch-videos">
                        <div class="w-16 h-16 rounded-xl bg-red-100 dark:bg-red-900 flex items-center justify-center mb-2">
                            <i class="fas fa-play-circle text-red-600 dark:text-red-300 text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-gray-800 dark:text-gray-200">Ads Videos</span>
                    </button>
                    
                    <button class="quick-action" data-action="daily-bonus">
                        <div class="w-16 h-16 rounded-xl bg-green-100 dark:bg-green-900 flex items-center justify-center mb-2">
                            <i class="fas fa-gift text-green-600 dark:text-green-300 text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-gray-800 dark:text-gray-200">Daily Bonus</span>
                    </button>
                    
                    <button class="quick-action" data-action="invite-friends">
                        <div class="w-16 h-16 rounded-xl bg-purple-100 dark:bg-purple-900 flex items-center justify-center mb-2">
                            <i class="fas fa-user-plus text-purple-600 dark:text-purple-300 text-xl"></i>
                        </div>
                        <span class="text-xs font-medium text-gray-800 dark:text-gray-200">Invite</span>
                    </button>
                </div>

                <!-- Start Earning Button -->
                <button id="startEarningBtn" class="w-full gradient-success text-white font-bold py-4 rounded-xl text-lg mb-6 shadow-lg hover:opacity-90 transition active:scale-95 animate-pulse-slow">
                    <i class="fas fa-play mr-2"></i> Start Earning Now
                </button>

                <!-- Referral Section -->
                <div class="glass-card rounded-2xl p-6 mb-6 gradient-info text-white">
                    <h3 class="text-xl font-bold mb-3">Refer & Earn</h3>
                    <p class="text-sm opacity-90 mb-4">Invite friends and earn ৳20 for each friend who joins!</p>
                    
                    <div class="bg-white/20 rounded-xl p-4 mb-4">
                        <p class="text-sm mb-2">Your Referral Link</p>
                        <div class="flex items-center">
                            <input id="referralLink" type="text" readonly class="flex-1 bg-transparent text-white text-sm outline-none">
                            <button id="copyLinkBtn" class="ml-2 w-10 h-10 rounded-full bg-white/30 flex items-center justify-center hover:bg-white/40 transition">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="flex space-x-3">
                        <button id="shareBtn" class="flex-1 bg-white text-blue-600 font-semibold py-3 rounded-xl hover:bg-gray-50 transition active:scale-95">
                            <i class="fas fa-share-alt mr-2"></i> Share Now
                        </button>
                        <button id="referralStatsBtn" class="flex-1 bg-white/20 text-white font-semibold py-3 rounded-xl hover:bg-white/30 transition active:scale-95">
                            <i class="fas fa-chart-bar mr-2"></i> Stats
                        </button>
                    </div>
                </div>

                <!-- Stats Section -->
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="glass-card rounded-2xl p-5">
                        <div class="flex items-center mb-3">
                            <div class="w-10 h-10 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center mr-3">
                                <i class="fas fa-fire text-green-600 dark:text-green-300"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-300">Daily Streak</p>
                                <p class="text-xl font-bold text-gray-800 dark:text-white" id="dailyStreak">0 days</p>
                            </div>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                            <div class="bg-green-500 h-2 rounded-full" style="width: 0%" id="streakProgress"></div>
                        </div>
                    </div>
                    
                    <div class="glass-card rounded-2xl p-5">
                        <div class="flex items-center mb-3">
                            <div class="w-10 h-10 rounded-full bg-purple-100 dark:bg-purple-900 flex items-center justify-center mr-3">
                                <i class="fas fa-users text-purple-600 dark:text-purple-300"></i>
                            </div>
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-300">Referrals</p>
                                <p class="text-xl font-bold text-gray-800 dark:text-white" id="referralCount">0 friends</p>
                            </div>
                        </div>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                            <div class="bg-purple-500 h-2 rounded-full" style="width: 0%" id="referralProgress"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Deposit Page -->
            <div id="depositPage" class="page">
                <div class="flex items-center mb-6">
                    <button id="backFromDeposit" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mr-3 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                        <i class="fas fa-arrow-left text-gray-600 dark:text-gray-300"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Deposit Coins</h2>
                </div>
                
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl p-6 text-white">
                        <p class="text-sm mb-1">Current Balance</p>
                        <p class="text-3xl font-bold" id="depositBalance">
                            <span class="taka-symbol text-2xl">৳</span> <span id="depositBalanceAmount">0</span>
                        </p>
                    </div>
                    
                    <div class="glass-card rounded-2xl p-6">
                        <p class="text-gray-600 dark:text-gray-300 mb-4">Add coins to your account to start earning more.</p>
                        
                        <div class="grid grid-cols-2 gap-3 mb-6">
                            <button class="deposit-option p-4 border-2 border-blue-200 dark:border-blue-700 rounded-xl hover:border-blue-500 dark:hover:border-blue-400 transition text-center" data-amount="100">
                                <p class="font-bold text-lg text-gray-800 dark:text-white">100</p>
                                <p class="text-sm text-gray-500 dark:text-gray-300">coins</p>
                                <p class="text-xs mt-2 text-blue-600 dark:text-blue-400">৳ 10</p>
                            </button>
                            
                            <button class="deposit-option p-4 border-2 border-blue-200 dark:border-blue-700 rounded-xl hover:border-blue-500 dark:hover:border-blue-400 transition text-center" data-amount="500">
                                <p class="font-bold text-lg text-gray-800 dark:text-white">500</p>
                                <p class="text-sm text-gray-500 dark:text-gray-300">coins</p>
                                <p class="text-xs mt-2 text-blue-600 dark:text-blue-400">৳ 50</p>
                            </button>
                            
                            <button class="deposit-option p-4 border-2 border-blue-200 dark:border-blue-700 rounded-xl hover:border-blue-500 dark:hover:border-blue-400 transition text-center" data-amount="1000">
                                <p class="font-bold text-lg text-gray-800 dark:text-white">1000</p>
                                <p class="text-sm text-gray-500 dark:text-gray-300">coins</p>
                                <p class="text-xs mt-2 text-blue-600 dark:text-blue-400">৳ 100</p>
                            </button>
                            
                            <button class="deposit-option p-4 border-2 border-blue-200 dark:border-blue-700 rounded-xl hover:border-blue-500 dark:hover:border-blue-400 transition text-center" data-amount="5000">
                                <p class="font-bold text-lg text-gray-800 dark:text-white">5000</p>
                                <p class="text-sm text-gray-500 dark:text-gray-300">coins</p>
                                <p class="text-xs mt-2 text-blue-600 dark:text-blue-400">৳ 500</p>
                            </button>
                        </div>
                        
                        <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-300 mb-3">Payment Methods:</p>
                            <div class="flex space-x-3">
                                <div class="w-12 h-12 rounded-xl bg-blue-100 dark:bg-blue-900 flex items-center justify-center">
                                    <i class="fab fa-paypal text-blue-600 dark:text-blue-300"></i>
                                </div>
                                <div class="w-12 h-12 rounded-xl bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center">
                                    <i class="fab fa-cc-visa text-yellow-600 dark:text-yellow-300"></i>
                                </div>
                                <div class="w-12 h-12 rounded-xl bg-green-100 dark:bg-green-900 flex items-center justify-center">
                                    <i class="fab fa-cc-mastercard text-green-600 dark:text-green-300"></i>
                                </div>
                                <div class="w-12 h-12 rounded-xl bg-purple-100 dark:bg-purple-900 flex items-center justify-center">
                                    <i class="fab fa-bitcoin text-purple-600 dark:text-purple-300"></i>
                                </div>
                            </div>
                        </div>
                        
                        <button id="proceedToPayment" class="w-full mt-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 rounded-xl hover:opacity-90 transition">
                            Proceed to Payment
                        </button>
                    </div>
                </div>
            </div>

            <!-- Withdraw Page -->
            <div id="withdrawPage" class="page">
                <div class="flex items-center mb-6">
                    <button id="backFromWithdraw" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mr-3 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                        <i class="fas fa-arrow-left text-gray-600 dark:text-gray-300"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">Withdraw Earnings</h2>
                </div>
                
                <div class="space-y-6">
                    <div class="bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-5 text-white">
                        <p class="text-sm mb-1">Available Balance</p>
                        <p class="text-3xl font-bold" id="withdrawBalance">
                            <span class="taka-symbol text-2xl">৳</span> <span id="withdrawBalanceAmount">0</span>
                        </p>
                        <p class="text-sm mt-2">Min. Withdrawal: ৳500 | Min. Referrals: 20</p>
                    </div>
                    
                    <div class="glass-card rounded-2xl p-6">
                        <p class="text-gray-600 dark:text-gray-300 mb-4">Select withdrawal method:</p>
                        
                        <div class="space-y-4 mb-6" id="withdrawalMethods">
                            <!-- Withdrawal methods will be loaded here -->
                        </div>
                        
                        <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
                            <p class="text-sm text-gray-500 dark:text-gray-300 mb-3">Withdrawal takes 24-48 hours to process.</p>
                            <button class="w-full bg-gradient-to-r from-green-500 to-emerald-600 text-white font-bold py-3 rounded-xl hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed" id="requestWithdrawalBtn">
                                Request Withdrawal
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tasks Page -->
            <div id="tasksPage" class="page">
                <div class="flex items-center mb-6">
                    <button id="backFromTasks" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mr-3 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                        <i class="fas fa-arrow-left text-gray-600 dark:text-gray-300"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">All Tasks</h2>
                </div>
                
                <div class="glass-card rounded-2xl p-6 mb-6 gradient-primary text-white">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-sm opacity-90">Tasks Progress</p>
                            <p class="text-2xl font-bold" id="tasksProgress">0/0</p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm opacity-90">Total Earned</p>
                            <p class="text-2xl font-bold">
                                <span class="taka-symbol text-xl">৳</span> <span id="totalEarned">0</span>
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-4" id="allTasksList">
                    <!-- All tasks will be loaded here -->
                </div>
            </div>

            <!-- Profile Page -->
            <div id="profilePage" class="page">
                <div class="flex items-center mb-6">
                    <button id="backFromProfile" class="w-10 h-10 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center mr-3 hover:bg-gray-200 dark:hover:bg-gray-600 transition">
                        <i class="fas fa-arrow-left text-gray-600 dark:text-gray-300"></i>
                    </button>
                    <h2 class="text-2xl font-bold text-gray-800 dark:text-white">My Profile</h2>
                </div>
                
                <div class="space-y-6">
                    <!-- Profile Info Card -->
                    <div class="glass-card rounded-2xl p-6">
                        <div class="text-center mb-6">
                            <img id="userProfilePic" src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png" 
                                 alt="Profile" class="profile-pic rounded-full mx-auto mb-4">
                            <h3 id="userFullName" class="text-xl font-bold text-gray-800 dark:text-white">Loading...</h3>
                            <p id="userEmail" class="text-gray-600 dark:text-gray-300">Loading...</p>
                            <p id="userPhone" class="text-gray-500 dark:text-gray-400 text-sm mt-1">Loading...</p>
                        </div>
                        
                        <div class="grid grid-cols-3 gap-4 mb-6">
                            <div class="text-center">
                                <p class="text-sm text-gray-500 dark:text-gray-300">Member Since</p>
                                <p id="memberSince" class="font-bold text-gray-800 dark:text-white">-</p>
                            </div>
                            <div class="text-center">
                                <p class="text-sm text-gray-500 dark:text-gray-300">Level</p>
                                <p id="userLevel" class="font-bold text-gray-800 dark:text-white">Beginner</p>
                            </div>
                            <div class="text-center">
                                <p class="text-sm text-gray-500 dark:text-gray-300">Status</p>
                                <p id="userStatus" class="font-bold text-green-600 dark:text-green-400">Active</p>
                            </div>
                        </div>
                        
                        <div class="flex space-x-3">
                            <button id="editProfileBtn" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold py-3 rounded-xl hover:opacity-90 transition">
                                <i class="fas fa-edit mr-2"></i> Edit Profile
                            </button>
                            <button id="changePasswordBtn" class="flex-1 border-2 border-blue-600 text-blue-600 dark:text-blue-400 dark:border-blue-400 font-bold py-3 rounded-xl hover:bg-blue-50 dark:hover:bg-blue-900/30 transition">
                                <i class="fas fa-key mr-2"></i> Change Password
                            </button>
                        </div>
                    </div>
                    
                    <!-- Account Statistics -->
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-lg font-bold text-gray-800 dark:text-white mb-4">Account Statistics</h3>
                        
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-xl bg-blue-100 dark:bg-blue-900 flex items-center justify-center mr-3">
                                        <i class="fas fa-coins text-blue-600 dark:text-blue-300"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800 dark:text-white">Total Earnings</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-300">All time</p>
                                    </div>
                                </div>
                                <p class="text-xl font-bold text-green-600 dark:text-green-400">
                                    <span class="taka-symbol">৳</span><span id="totalEarnings">0</span>
                                </p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-xl bg-green-100 dark:bg-green-900 flex items-center justify-center mr-3">
                                        <i class="fas fa-tasks text-green-600 dark:text-green-300"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800 dark:text-white">Tasks Completed</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-300">This month</p>
                                    </div>
                                </div>
                                <p class="text-xl font-bold text-gray-800 dark:text-white" id="monthlyTasks">0</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-xl bg-purple-100 dark:bg-purple-900 flex items-center justify-center mr-3">
                                        <i class="fas fa-users text-purple-600 dark:text-purple-300"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800 dark:text-white">Successful Referrals</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-300">Active referrals</p>
                                    </div>
                                </div>
                                <p class="text-xl font-bold text-gray-800 dark:text-white" id="activeReferrals">0</p>
                            </div>
                            
                            <div class="flex justify-between items-center">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-xl bg-yellow-100 dark:bg-yellow-900 flex items-center justify-center mr-3">
                                        <i class="fas fa-calendar-alt text-yellow-600 dark:text-yellow-300"></i>
                                    </div>
                                    <div>
                                        <p class="font-medium text-gray-800 dark:text-white">Current Streak</p>
                                        <p class="text-sm text-gray-500 dark:text-gray-300">Daily login</p>
                                    </div>
                                </div>
                                <p class="text-xl font-bold text-gray-800 dark:text-white" id="currentStreak">0 days</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Account Settings -->
                    <div class="glass-card rounded-2xl p-6">
                        <h3 class="text-lg font-bold text-gray-800 dark:text-white mb-4">Account Settings</h3>
                        
                        <div class="space-y-3">
                            <button class="w-full flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-xl bg-red-100 dark:bg-red-900 flex items-center justify-center mr-3">
                                        <i class="fas fa-bell text-red-600 dark:text-red-300"></i>
                                    </div>
                                    <span class="font-medium text-gray-800 dark:text-white">Notification Settings</span>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </button>
                            
                            <button class="w-full flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-xl bg-green-100 dark:bg-green-900 flex items-center justify-center mr-3">
                                        <i class="fas fa-shield-alt text-green-600 dark:text-green-300"></i>
                                    </div>
                                    <span class="font-medium text-gray-800 dark:text-white">Privacy & Security</span>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </button>
                            
                            <button class="w-full flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-xl bg-blue-100 dark:bg-blue-900 flex items-center justify-center mr-3">
                                        <i class="fas fa-question-circle text-blue-600 dark:text-blue-300"></i>
                                    </div>
                                    <span class="font-medium text-gray-800 dark:text-white">Help & Support</span>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </button>
                            
                            <button class="w-full flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800 transition">
                                <div class="flex items-center">
                                    <div class="w-10 h-10 rounded-xl bg-purple-100 dark:bg-purple-900 flex items-center justify-center mr-3">
                                        <i class="fas fa-file-contract text-purple-600 dark:text-purple-300"></i>
                                    </div>
                                    <span class="font-medium text-gray-800 dark:text-white">Terms & Conditions</span>
                                </div>
                                <i class="fas fa-chevron-right text-gray-400"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Logout Button -->
                    <button id="logoutMainBtn" class="w-full bg-gradient-to-r from-red-500 to-pink-600 text-white font-bold py-3 rounded-xl hover:opacity-90 transition">
                        <i class="fas fa-sign-out-alt mr-2"></i> Logout Account
                    </button>
                </div>
            </div>
        </main>

        <!-- Bottom Navigation (Only shown after login) -->
        <nav id="bottomNav" class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 py-3 px-6 hidden">
            <div class="flex justify-between items-center">
                <button class="nav-btn active" data-page="home">
                    <i class="fas fa-home text-lg mb-1"></i>
                    <span class="text-xs">Home</span>
                </button>
                
                <button class="nav-btn" data-page="tasks">
                    <i class="fas fa-tasks text-lg mb-1"></i>
                    <span class="text-xs">Tasks</span>
                </button>
                
                <button class="nav-btn" data-page="earn">
                    <div class="w-14 h-14 rounded-full gradient-primary flex items-center justify-center -mt-6 shadow-lg">
                        <i class="fas fa-bolt text-white text-xl"></i>
                    </div>
                </button>
                
                <button class="nav-btn" data-page="withdraw">
                    <i class="fas fa-wallet text-lg mb-1"></i>
                    <span class="text-xs">Withdraw</span>
                </button>
                
                <button class="nav-btn" data-page="profile">
                    <i class="fas fa-user text-lg mb-1"></i>
                    <span class="text-xs">Profile</span>
                </button>
            </div>
        </nav>

        <!-- Notification -->
        <div id="notification" class="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 w-11/12 max-w-md hidden">
            <div class="bg-gradient-to-r from-green-500 to-emerald-600 text-white p-4 rounded-xl shadow-lg flex items-center">
                <i class="fas fa-check-circle text-xl mr-3"></i>
                <p id="notificationText">Notification message</p>
                <button id="closeNotification" class="ml-auto text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
    </div>
<script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyA2HUBFhHEWg4MwkJB4BVdJxUun0Gy07Ts",
            authDomain: "daily-earne-aea89.firebaseapp.com",
            databaseURL: "https://daily-earne-aea89-default-rtdb.firebaseio.com",
            projectId: "daily-earne-aea89",
            storageBucket: "daily-earne-aea89.firebasestorage.app",
            messagingSenderId: "444567470638",
            appId: "1:444567470638:web:0fa323d9f5ef6aba1155bf"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const database = firebase.database();
        const storage = firebase.storage();

        // Global Variables
        let currentUser = null;
        let userData = null;
        let selectedProfilePicture = null;
        let currentAdProvider = 'moneTag'; // 'moneTag' or 'gigaPub'

        // DOM Elements
        const elements = {
            // Auth Elements
            authContainer: document.getElementById('authContainer'),
            loginPage: document.getElementById('loginPage'),
            signupPage: document.getElementById('signupPage'),
            loginForm: document.getElementById('loginForm'),
            signupForm: document.getElementById('signupForm'),
            loginEmailPhone: document.getElementById('loginEmailPhone'),
            loginPassword: document.getElementById('loginPassword'),
            signupEmail: document.getElementById('signupEmail'),
            signupPassword: document.getElementById('signupPassword'),
            confirmPassword: document.getElementById('confirmPassword'),
            fullName: document.getElementById('fullName'),
            phoneNumber: document.getElementById('phoneNumber'),
            profilePicture: document.getElementById('profilePicture'),
            profilePreview: document.getElementById('profilePreview'),
            loginBtn: document.getElementById('loginBtn'),
            signupBtn: document.getElementById('signupBtn'),
            loginSpinner: document.getElementById('loginSpinner'),
            signupSpinner: document.getElementById('signupSpinner'),
            showSignupBtn: document.getElementById('showSignupBtn'),
            backToLogin: document.getElementById('backToLogin'),
            toggleLoginPassword: document.getElementById('toggleLoginPassword'),
            toggleSignupPassword: document.getElementById('toggleSignupPassword'),
            toggleConfirmPassword: document.getElementById('toggleConfirmPassword'),
            
            // Main App Elements
            mainContainer: document.getElementById('mainContainer'),
            bottomNav: document.getElementById('bottomNav'),
            logoutBtn: document.getElementById('logoutBtn'),
            logoutMainBtn: document.getElementById('logoutMainBtn'),
            
            // Home Page
            balanceAmount: document.getElementById('balanceAmount'),
            currentBalance: document.getElementById('currentBalance'),
            depositBtn: document.getElementById('depositBtn'),
            withdrawBtn: document.getElementById('withdrawBtn'),
            referralLink: document.getElementById('referralLink'),
            dailyStreak: document.getElementById('dailyStreak'),
            streakProgress: document.getElementById('streakProgress'),
            referralCount: document.getElementById('referralCount'),
            referralProgress: document.getElementById('referralProgress'),
            referralStatsBtn: document.getElementById('referralStatsBtn'),
            dailyAdsCounter: document.getElementById('dailyAdsCounter'),
            
            // Deposit Page
            backFromDeposit: document.getElementById('backFromDeposit'),
            depositBalanceAmount: document.getElementById('depositBalanceAmount'),
            
            // Withdraw Page
            backFromWithdraw: document.getElementById('backFromWithdraw'),
            withdrawBalanceAmount: document.getElementById('withdrawBalanceAmount'),
            withdrawalMethods: document.getElementById('withdrawalMethods'),
            requestWithdrawalBtn: document.getElementById('requestWithdrawalBtn'),
            
            // Tasks Page
            backFromTasks: document.getElementById('backFromTasks'),
            tasksProgress: document.getElementById('tasksProgress'),
            totalEarned: document.getElementById('totalEarned'),
            allTasksList: document.getElementById('allTasksList'),
            
            // Profile Page
            backFromProfile: document.getElementById('backFromProfile'),
            userProfilePic: document.getElementById('userProfilePic'),
            userFullName: document.getElementById('userFullName'),
            userEmail: document.getElementById('userEmail'),
            userPhone: document.getElementById('userPhone'),
            memberSince: document.getElementById('memberSince'),
            userLevel: document.getElementById('userLevel'),
            userStatus: document.getElementById('userStatus'),
            totalEarnings: document.getElementById('totalEarnings'),
            monthlyTasks: document.getElementById('monthlyTasks'),
            activeReferrals: document.getElementById('activeReferrals'),
            currentStreak: document.getElementById('currentStreak'),
            editProfileBtn: document.getElementById('editProfileBtn'),
            changePasswordBtn: document.getElementById('changePasswordBtn'),
            
            // Navigation
            navBtns: document.querySelectorAll('.nav-btn'),
            
            // Notification
            notification: document.getElementById('notification'),
            notificationText: document.getElementById('notificationText'),
            closeNotification: document.getElementById('closeNotification'),
            
            // Theme Toggle
            themeToggle: document.getElementById('themeToggle'),
            pageTitle: document.getElementById('pageTitle')
        };

        // Current Page State
        let currentPage = 'home';
        let previousPage = 'home';

        // Initialize App
        document.addEventListener('DOMContentLoaded', () => {
            initializeApp();
            setupEventListeners();
            
            // Check if user is already logged in
            auth.onAuthStateChanged((user) => {
                if (user) {
                    // User is signed in
                    currentUser = user;
                    loadUserData();
                } else {
                    // User is signed out
                    showAuthPages();
                }
            });
        });

        // Initialize App
        function initializeApp() {
            // Set initial theme based on localStorage or system preference
            const savedTheme = localStorage.getItem('dailyEarningTheme');
            const systemPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (savedTheme === 'dark' || (!savedTheme && systemPrefersDark)) {
                document.body.classList.add('dark');
                updateThemeIcon(true);
            }
            
            // Generate initial referral link
            generateRandomReferralLink();
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Auth Event Listeners
            elements.loginForm.addEventListener('submit', handleLogin);
            elements.signupForm.addEventListener('submit', handleSignup);
            elements.showSignupBtn.addEventListener('click', () => navigateToAuthPage('signup'));
            elements.backToLogin.addEventListener('click', () => navigateToAuthPage('login'));
            elements.toggleLoginPassword.addEventListener('click', () => togglePasswordVisibility('loginPassword', elements.toggleLoginPassword));
            elements.toggleSignupPassword.addEventListener('click', () => togglePasswordVisibility('signupPassword', elements.toggleSignupPassword));
            elements.toggleConfirmPassword.addEventListener('click', () => togglePasswordVisibility('confirmPassword', elements.toggleConfirmPassword));
            elements.profilePicture.addEventListener('change', handleProfilePictureChange);
            
            // Logout Buttons
            elements.logoutBtn.addEventListener('click', handleLogout);
            elements.logoutMainBtn.addEventListener('click', handleLogout);
            
            // Theme Toggle
            elements.themeToggle.addEventListener('click', toggleTheme);
            
            // Close Notification
            elements.closeNotification.addEventListener('click', () => {
                elements.notification.classList.add('hidden');
            });
            
            // Navigation Buttons
            elements.navBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const page = this.dataset.page;
                    if (page === 'earn') {
                        navigateToPage('home');
                    } else {
                        navigateToPage(page);
                    }
                    
                    // Update active state
                    updateNavActiveState(page === 'earn' ? 'home' : page);
                });
            });
            
            // Quick Actions
            document.querySelectorAll('.quick-action').forEach(btn => {
                btn.addEventListener('click', function() {
                    const action = this.dataset.action;
                    handleQuickAction(action);
                });
            });
            
            // Home Page Buttons - FIXED
            elements.depositBtn.addEventListener('click', () => navigateToPage('deposit'));
            elements.withdrawBtn.addEventListener('click', () => navigateToPage('withdraw'));
            
            // Back Buttons - FIXED
            elements.backFromDeposit.addEventListener('click', () => navigateToPage('home'));
            elements.backFromWithdraw.addEventListener('click', () => navigateToPage('home'));
            elements.backFromTasks.addEventListener('click', () => navigateToPage('home'));
            elements.backFromProfile.addEventListener('click', () => navigateToPage('home'));
            
            // Copy Referral Link
            document.getElementById('copyLinkBtn').addEventListener('click', copyReferralLink);
            
            // Share Button
            document.getElementById('shareBtn').addEventListener('click', shareReferralLink);
            
            // Stats Button - FIXED
            elements.referralStatsBtn.addEventListener('click', () => {
                showNotification('Referral stats feature coming soon!', 'info');
            });
            
            // Start Earning Button
            document.getElementById('startEarningBtn').addEventListener('click', () => navigateToPage('tasks'));
            
            // Deposit Options
            document.querySelectorAll('.deposit-option').forEach(option => {
                option.addEventListener('click', function() {
                    const amount = this.dataset.amount;
                    showNotification(`Selected ৳${amount} for deposit`, 'info');
                });
            });
            
            // Proceed to Payment
            document.getElementById('proceedToPayment').addEventListener('click', () => {
                showNotification('Payment feature would be implemented in production', 'info');
            });
            
            // Edit Profile Button
            elements.editProfileBtn.addEventListener('click', () => {
                showNotification('Edit profile feature coming soon!', 'info');
            });
            
            // Change Password Button
            elements.changePasswordBtn.addEventListener('click', () => {
                showNotification('Change password feature coming soon!', 'info');
            });
        }

        // Auth Page Navigation
        function navigateToAuthPage(page) {
            // Hide all auth pages
            document.querySelectorAll('#authContainer .page').forEach(p => {
                p.classList.remove('active');
            });
            
            // Show selected auth page
            const pageElement = document.getElementById(`${page}Page`);
            if (pageElement) {
                pageElement.classList.add('active');
            }
        }

        // Handle Login
        async function handleLogin(e) {
            e.preventDefault();
            
            const emailPhone = elements.loginEmailPhone.value.trim();
            const password = elements.loginPassword.value;
            
            if (!emailPhone || !password) {
                showNotification('Please fill in all fields', 'error');
                return;
            }
            
            try {
                // Show loading
                elements.loginSpinner.classList.remove('hidden');
                elements.loginBtn.disabled = true;
                
                let authResult;
                
                // Check if input is email or phone number
                if (emailPhone.includes('@')) {
                    // Email login
                    authResult = await auth.signInWithEmailAndPassword(emailPhone, password);
                } else {
                    // Phone login - In production, you would implement phone auth
                    showNotification('Phone login is not yet implemented. Please use email.', 'error');
                    elements.loginSpinner.classList.add('hidden');
                    elements.loginBtn.disabled = false;
                    return;
                }
                
                // Login successful
                currentUser = authResult.user;
                await loadUserData();
                
                showNotification('Login successful! Welcome back.', 'success');
                
            } catch (error) {
                console.error('Login error:', error);
                let errorMessage = 'Login failed. Please try again.';
                
                switch(error.code) {
                    case 'auth/user-not-found':
                        errorMessage = 'No account found with this email/phone.';
                        break;
                    case 'auth/wrong-password':
                        errorMessage = 'Incorrect password. Please try again.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Invalid email address.';
                        break;
                    case 'auth/user-disabled':
                        errorMessage = 'This account has been disabled.';
                        break;
                }
                
                showNotification(errorMessage, 'error');
            } finally {
                elements.loginSpinner.classList.add('hidden');
                elements.loginBtn.disabled = false;
            }
        }

        // Handle Signup
        async function handleSignup(e) {
            e.preventDefault();
            
            const fullName = elements.fullName.value.trim();
            const email = elements.signupEmail.value.trim();
            const phone = elements.phoneNumber.value.trim();
            const password = elements.signupPassword.value;
            const confirmPassword = elements.confirmPassword.value;
            
            // Validation
            if (!fullName || !email || !password || !confirmPassword) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }
            
            if (password.length < 6) {
                showNotification('Password must be at least 6 characters', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match', 'error');
                return;
            }
            
            try {
                // Show loading
                elements.signupSpinner.classList.remove('hidden');
                elements.signupBtn.disabled = true;
                
                // Create user with email and password
                const authResult = await auth.createUserWithEmailAndPassword(email, password);
                currentUser = authResult.user;
                
                // Upload profile picture if selected
                let profilePicUrl = 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png';
                
                if (selectedProfilePicture) {
                    try {
                        profilePicUrl = await uploadProfilePicture(selectedProfilePicture, currentUser.uid);
                    } catch (uploadError) {
                        console.error('Profile picture upload failed:', uploadError);
                        // Continue without profile picture
                    }
                }
                
                // Create user data in database
                const userData = {
                    uid: currentUser.uid,
                    fullName: fullName,
                    email: email,
                    phone: phone || '',
                    profilePicture: profilePicUrl,
                    balance: 0,
                    streak: 0,
                    referrals: 0,
                    successfulReferrals: 0,
                    totalReferralEarnings: 0,
                    tasksCompleted: 0,
                    totalEarnings: 0,
                    monthlyTasks: 0,
                    activeReferrals: 0,
                    memberSince: new Date().toISOString(),
                    level: 'Beginner',
                    status: 'Active',
                    lastLogin: new Date().toISOString(),
                    lastDailyBonus: null,
                    dailyAdsWatched: 0,
                    lastAdsDate: null
                };
                
                // Save user data to database
                await database.ref('users/' + currentUser.uid).set(userData);
                
                // Update local user data
                await loadUserData();
                
                showNotification('Account created successfully! Welcome to Daily Earning.', 'success');
                
            } catch (error) {
                console.error('Signup error:', error);
                let errorMessage = 'Signup failed. Please try again.';
                
                switch(error.code) {
                    case 'auth/email-already-in-use':
                        errorMessage = 'Email already in use. Please use a different email.';
                        break;
                    case 'auth/invalid-email':
                        errorMessage = 'Invalid email address.';
                        break;
                    case 'auth/weak-password':
                        errorMessage = 'Password is too weak. Please use a stronger password.';
                        break;
                }
                
                showNotification(errorMessage, 'error');
            } finally {
                elements.signupSpinner.classList.add('hidden');
                elements.signupBtn.disabled = false;
            }
        }

        // Handle Profile Picture Change
        function handleProfilePictureChange(e) {
            const file = e.target.files[0];
            if (file) {
                // Validate file type
                if (!file.type.match('image.*')) {
                    showNotification('Please select an image file', 'error');
                    return;
                }
                
                // Validate file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    showNotification('Image size should be less than 5MB', 'error');
                    return;
                }
                
                selectedProfilePicture = file;
                
                // Preview image
                const reader = new FileReader();
                reader.onload = function(e) {
                    elements.profilePreview.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        }

        // Upload Profile Picture
        async function uploadProfilePicture(file, userId) {
            return new Promise((resolve, reject) => {
                const storageRef = storage.ref();
                const profilePicRef = storageRef.child(`profile-pictures/${userId}/${file.name}`);
                
                const uploadTask = profilePicRef.put(file);
                
                uploadTask.on('state_changed',
                    (snapshot) => {
                        // Progress monitoring can be added here
                        const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                        console.log('Upload is ' + progress + '% done');
                    },
                    (error) => {
                        reject(error);
                    },
                    async () => {
                        // Upload completed successfully
                        const downloadURL = await uploadTask.snapshot.ref.getDownloadURL();
                        resolve(downloadURL);
                    }
                );
            });
        }

        // Load User Data
        async function loadUserData() {
            if (!currentUser) return;
            
            try {
                // Get user data from database
                const snapshot = await database.ref('users/' + currentUser.uid).once('value');
                userData = snapshot.val();
                
                if (!userData) {
                    // Create default user data if not exists
                    userData = {
                        uid: currentUser.uid,
                        fullName: currentUser.displayName || 'User',
                        email: currentUser.email,
                        phone: '',
                        profilePicture: currentUser.photoURL || 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png',
                        balance: 0,
                        streak: 0,
                        referrals: 0,
                        successfulReferrals: 0,
                        totalReferralEarnings: 0,
                        tasksCompleted: 0,
                        totalEarnings: 0,
                        monthlyTasks: 0,
                        activeReferrals: 0,
                        memberSince: new Date().toISOString(),
                        level: 'Beginner',
                        status: 'Active',
                        lastLogin: new Date().toISOString(),
                        lastDailyBonus: null,
                        dailyAdsWatched: 0,
                        lastAdsDate: null
                    };
                    
                    await database.ref('users/' + currentUser.uid).set(userData);
                } else {
                    // Update last login
                    await database.ref('users/' + currentUser.uid).update({
                        lastLogin: new Date().toISOString()
                    });
                    
                    // Check if daily ads count should be reset
                    const today = new Date().toDateString();
                    const lastAdsDate = userData.lastAdsDate ? new Date(userData.lastAdsDate).toDateString() : null;
                    
                    if (lastAdsDate !== today) {
                        // Reset daily ads count
                        await database.ref('users/' + currentUser.uid).update({
                            dailyAdsWatched: 0,
                            lastAdsDate: new Date().toISOString()
                        });
                        userData.dailyAdsWatched = 0;
                        userData.lastAdsDate = new Date().toISOString();
                    }
                }
                
                // Update UI with user data
                updateUserInterface();
                
                // Show main app
                showMainApp();
                
            } catch (error) {
                console.error('Error loading user data:', error);
                showNotification('Error loading user data', 'error');
            }
        }

        // Update User Interface
        function updateUserInterface() {
            if (!userData) return;
            
            // Home Page
            elements.currentBalance.textContent = userData.balance || 0;
            elements.dailyStreak.textContent = `${userData.streak || 0} days`;
            elements.streakProgress.style.width = `${Math.min((userData.streak || 0) * 10, 100)}%`;
            elements.referralCount.textContent = `${userData.successfulReferrals || 0} friends`;
            elements.referralProgress.style.width = `${Math.min((userData.successfulReferrals || 0) * 5, 100)}%`;
            
            // Update daily ads counter
            if (elements.dailyAdsCounter) {
                elements.dailyAdsCounter.textContent = `(${userData.dailyAdsWatched || 0}/15)`;
            }
            
            // Deposit Page
            elements.depositBalanceAmount.textContent = userData.balance || 0;
            
            // Withdraw Page
            elements.withdrawBalanceAmount.textContent = userData.balance || 0;
            
            // Tasks Page
            elements.tasksProgress.textContent = `${userData.tasksCompleted || 0}/10`;
            elements.totalEarned.textContent = userData.totalEarnings || 0;
            
            // Profile Page
            elements.userProfilePic.src = userData.profilePicture;
            elements.userFullName.textContent = userData.fullName;
            elements.userEmail.textContent = userData.email;
            elements.userPhone.textContent = userData.phone || 'Not provided';
            
            // Format member since date
            if (userData.memberSince) {
                const date = new Date(userData.memberSince);
                elements.memberSince.textContent = date.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'short', 
                    day: 'numeric' 
                });
            }
            
            elements.userLevel.textContent = userData.level || 'Beginner';
            elements.userStatus.textContent = userData.status || 'Active';
            elements.totalEarnings.textContent = userData.totalEarnings || 0;
            elements.monthlyTasks.textContent = userData.monthlyTasks || 0;
            elements.activeReferrals.textContent = userData.successfulReferrals || 0;
            elements.currentStreak.textContent = `${userData.streak || 0} days`;
            
            // Generate referral link with user ID
            generateUserReferralLink();
        }

        // Generate User Referral Link
        function generateUserReferralLink() {
            if (!currentUser || !userData) return;
            
            const baseUrl = 'https://daily-earne.vercel.app';
            const referralCode = `ref_${currentUser.uid.substring(0, 8)}`;
            const referralLink = `${baseUrl}/?ref=${referralCode}`;
            
            // Update referral link input
            if (elements.referralLink) {
                elements.referralLink.value = referralLink;
            }
        }

        // Handle Logout
        async function handleLogout() {
            try {
                await auth.signOut();
                currentUser = null;
                userData = null;
                showAuthPages();
                showNotification('Logged out successfully', 'success');
            } catch (error) {
                console.error('Logout error:', error);
                showNotification('Logout failed. Please try again.', 'error');
            }
        }

        // Show Auth Pages
        function showAuthPages() {
            elements.authContainer.classList.remove('hidden');
            elements.mainContainer.classList.add('hidden');
            elements.bottomNav.classList.add('hidden');
            elements.logoutBtn.classList.add('hidden');
            navigateToAuthPage('login');
        }

        // Show Main App
        function showMainApp() {
            elements.authContainer.classList.add('hidden');
            elements.mainContainer.classList.remove('hidden');
            elements.bottomNav.classList.remove('hidden');
            elements.logoutBtn.classList.remove('hidden');
            navigateToPage('home');
            updateNavActiveState('home');
        }

        // Navigate to Page
        function navigateToPage(page) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(p => {
                p.classList.remove('active');
            });
            
            // Store previous page
            previousPage = currentPage;
            currentPage = page;
            
            // Show selected page
            const pageElement = document.getElementById(`${page}Page`);
            if (pageElement) {
                pageElement.classList.add('active');
                
                // Update page title
                const pageTitles = {
                    'home': 'Earn money online',
                    'deposit': 'Deposit Money',
                    'withdraw': 'Withdraw Earnings',
                    'tasks': 'All Tasks',
                    'profile': 'My Profile'
                };
                
                elements.pageTitle.textContent = pageTitles[page] || 'Daily Earning';
                
                // Update data on page if needed
                if (page === 'deposit') {
                    elements.depositBalanceAmount.textContent = userData?.balance || 0;
                } else if (page === 'withdraw') {
                    elements.withdrawBalanceAmount.textContent = userData?.balance || 0;
                    loadWithdrawalMethods();
                } else if (page === 'tasks') {
                    loadAllTasks();
                }
            }
        }

        // Update Navigation Active State
        function updateNavActiveState(page) {
            elements.navBtns.forEach(btn => {
                btn.classList.remove('active', 'tab-active');
                btn.classList.add('text-gray-500');
            });
            
            const activeBtn = document.querySelector(`[data-page="${page}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active', 'tab-active', 'text-blue-600');
            }
        }

        // Load All Tasks
        function loadAllTasks() {
            if (!elements.allTasksList) return;
            
            const tasks = [
                { id: 1, title: 'Watch Short Ad', description: 'Watch a 30-second ad', reward: 10, icon: 'fa-ad', completed: userData?.tasksCompleted >= 1 },
                { id: 2, title: 'Watch Video', description: 'Watch a 1-minute video', reward: 15, icon: 'fa-play-circle', completed: userData?.tasksCompleted >= 2 },
                { id: 3, title: 'Complete Survey', description: 'Answer 5 questions', reward: 25, icon: 'fa-clipboard-check', completed: userData?.tasksCompleted >= 3 },
                { id: 4, title: 'Install App', description: 'Install & open recommended app', reward: 50, icon: 'fa-mobile-alt', completed: userData?.tasksCompleted >= 4 },
                { id: 5, title: 'Rate App', description: 'Rate our app on store', reward: 20, icon: 'fa-star', completed: userData?.tasksCompleted >= 5 },
                { id: 6, title: 'Follow Social', description: 'Follow our social media', reward: 15, icon: 'fa-thumbs-up', completed: userData?.tasksCompleted >= 6 },
                { id: 7, title: 'Daily Login', description: 'Login daily for bonus', reward: 10, icon: 'fa-calendar-check', completed: userData?.tasksCompleted >= 7 },
                { id: 8, title: 'Invite Friend', description: 'Invite a friend to join', reward: 50, icon: 'fa-user-plus', completed: userData?.tasksCompleted >= 8 }
            ];
            
            elements.allTasksList.innerHTML = '';
            elements.tasksProgress.textContent = `${userData?.tasksCompleted || 0}/${tasks.length}`;
            
            tasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = `flex items-center justify-between p-4 rounded-xl border ${task.completed ? 'bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800' : 'border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600'} transition`;
                taskElement.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-xl ${task.completed ? 'bg-green-100 dark:bg-green-800' : 'bg-blue-100 dark:bg-blue-800'} flex items-center justify-center mr-3">
                            <i class="fas ${task.icon} ${task.completed ? 'text-green-600 dark:text-green-300' : 'text-blue-600 dark:text-blue-300'}"></i>
                        </div>
                        <div>
                            <h4 class="font-medium text-gray-800 dark:text-white">${task.title}</h4>
                            <p class="text-sm text-gray-500 dark:text-gray-300">${task.description}</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-bold text-green-600 dark:text-green-400">+৳${task.reward}</p>
                        <button class="all-task-complete-btn mt-2 px-3 py-1 rounded-full text-xs font-medium ${task.completed ? 'bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400 cursor-default' : 'bg-blue-600 dark:bg-blue-700 text-white hover:bg-blue-700 dark:hover:bg-blue-600'}" 
                                data-id="${task.id}" ${task.completed ? 'disabled' : ''}>
                            ${task.completed ? '✓ Done' : 'Start'}
                        </button>
                    </div>
                `;
                elements.allTasksList.appendChild(taskElement);
            });
            
            // Add event listeners to task buttons
            document.querySelectorAll('.all-task-complete-btn').forEach(btn => {
                btn.addEventListener('click', async function() {
                    if (this.disabled) return;
                    
                    const taskId = parseInt(this.dataset.id);
                    const taskReward = [10, 15, 25, 50, 20, 15, 10, 50][taskId - 1];
                    
                    try {
                        // Update user data
                        const updates = {};
                        updates['balance'] = (userData.balance || 0) + taskReward;
                        updates['tasksCompleted'] = (userData.tasksCompleted || 0) + 1;
                        updates['totalEarnings'] = (userData.totalEarnings || 0) + taskReward;
                        updates['monthlyTasks'] = (userData.monthlyTasks || 0) + 1;
                        
                        await database.ref('users/' + currentUser.uid).update(updates);
                        
                        // Update local user data
                        userData = { ...userData, ...updates };
                        
                        // Update UI
                        updateUserInterface();
                        loadAllTasks();
                        
                        showNotification(`Task completed! +৳${taskReward} earned.`, 'success');
                        
                    } catch (error) {
                        console.error('Error completing task:', error);
                        showNotification('Error completing task. Please try again.', 'error');
                    }
                });
            });
        }

        // Load Withdrawal Methods
        function loadWithdrawalMethods() {
            if (!elements.withdrawalMethods) return;
            
            const methods = [
                { id: 1, name: 'bKash', minAmount: 500, rate: '100 coins = ৳100', icon: 'fa-mobile-alt', color: 'text-red-600' },
                { id: 2, name: 'Nagad', minAmount: 500, rate: '100 coins = ৳100', icon: 'fa-wallet', color: 'text-green-600' },
                { id: 3, name: 'Bank Transfer', minAmount: 1000, rate: '500 coins = ৳500', icon: 'fa-university', color: 'text-blue-600' },
                { id: 4, name: 'Rocket', minAmount: 500, rate: '100 coins = ৳100', icon: 'fa-rocket', color: 'text-purple-600' }
            ];
            
            elements.withdrawalMethods.innerHTML = '';
            
            methods.forEach(method => {
                const methodElement = document.createElement('div');
                methodElement.className = 'withdraw-method p-4 border border-gray-200 dark:border-gray-700 rounded-xl hover:border-blue-500 dark:hover:border-blue-400 transition cursor-pointer';
                methodElement.setAttribute('data-id', method.id);
                methodElement.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center mr-4">
                                <i class="fas ${method.icon} ${method.color} text-xl"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-gray-800 dark:text-white">${method.name}</h4>
                                <p class="text-sm text-gray-500 dark:text-gray-300">${method.rate}</p>
                                <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Min: ৳${method.minAmount}</p>
                            </div>
                        </div>
                        <i class="fas fa-chevron-right text-gray-400"></i>
                    </div>
                `;
                elements.withdrawalMethods.appendChild(methodElement);
                
                // Add click event
                methodElement.addEventListener('click', () => {
                    if ((userData?.balance || 0) >= method.minAmount && (userData?.successfulReferrals || 0) >= 20) {
                        showNotification(`Selected ${method.name} for withdrawal`, 'info');
                    } else {
                        if ((userData?.balance || 0) < method.minAmount) {
                            showNotification(`Minimum ৳${method.minAmount} required for ${method.name} withdrawal`, 'error');
                        } else {
                            showNotification(`Minimum 20 referrals required for withdrawal`, 'error');
                        }
                    }
                });
            });
            
            // Update withdraw button state
            const minWithdrawal = 500;
            const minReferrals = 20;
            
            const hasMinBalance = (userData?.balance || 0) >= minWithdrawal;
            const hasMinReferrals = (userData?.successfulReferrals || 0) >= minReferrals;
            
            elements.requestWithdrawalBtn.disabled = !hasMinBalance || !hasMinReferrals;
            
            if (!hasMinBalance) {
                elements.requestWithdrawalBtn.innerHTML = `Need ৳${minWithdrawal - (userData?.balance || 0)} more`;
            } else if (!hasMinReferrals) {
                const needed = minReferrals - (userData?.successfulReferrals || 0);
                elements.requestWithdrawalBtn.innerHTML = `Need ${needed} more referral${needed > 1 ? 's' : ''}`;
            } else {
                elements.requestWithdrawalBtn.innerHTML = 'Request Withdrawal';
            }
            
            // Add withdrawal request handler
            elements.requestWithdrawalBtn.addEventListener('click', async function() {
                if (this.disabled) return;
                
                try {
                    showNotification('Withdrawal request sent! Funds will arrive in 24-48 hours.', 'success');
                    
                  //   In production, you would save withdrawal request to database
                 //    const withdrawalRef = database.ref('withdrawals').push();
                 //    await withdrawalRef.set({
                  //       userId: currentUser.uid,
                  //       amount: userData.balance,
                  //       method: selectedMethod,
                  //       status: 'pending',
                  //       timestamp: new Date().toISOString()
                 //    });
                    
                } catch (error) {
                    console.error('Error processing withdrawal:', error);
                    showNotification('Error processing withdrawal. Please try again.', 'error');
                }
            });
        }

// Handle Quick Actions
function handleQuickAction(action) {
    if (!currentUser || !userData) {
        showNotification('Please login first!', 'error');
        return;
    }
    
    switch(action) {
        case 'watch-ads':
            // শুধু Mone Tag Ads শো করবে
            showMoneTagAdOnly('ads', 1);
            break;
        case 'watch-videos':
            // Videos বাটনে Mone Tag Ads শো করবে না
            showNotification('Video ads feature is coming soon!', 'info');
            break;
        case 'daily-bonus':
            claimDailyBonus();
            break;
        case 'invite-friends':
            showNotification('Use the referral section below to invite friends!', 'info');
            break;
    }
}

// Show Only Mone Tag Ads
function showMoneTagAdsOnly(type, rewardPerAd) {
    if (!currentUser || !userData) return;
    
    // Check daily ads limit
    if (userData.dailyAdsWatched >= 100) {
        showNotification('আজ আপনি সর্বোচ্চ ১৫টি Ads দেখেছেন! আগামীকাল আবার চেষ্টা করুন।', 'error');
        return;
    }
    
    // Calculate how many ads can be watched today
    const adsLeftToday = 100 - userData.dailyAdsWatched;
    if (adsLeftToday < 1) {
        showNotification(`আজ মাত্র ${adsLeftToday}টি Ads দেখার বাকি আছে! আগামীকাল আবার চেষ্টা করুন।`, 'error');
        return;
    }
    
       // Create loading indicator
    const loadingOverlay = document.createElement('div');
    loadingOverlay.className = 'fixed inset-0 bg-black flex items-center justify-center z-50';
    loadingOverlay.innerHTML = `
        <div class="text-center">
            <i class="fas fa-spinner fa-spin text-white text-4xl mb-3"></i>
            <p class="text-white text-lg">Starting Mone Tag Ad...</p>
            <p class="text-gray-400 text-sm mt-2">Please wait</p>
        </div>
    `;
    
    document.body.appendChild(loadingOverlay);
    
    // Show Mone Tag ad
    setTimeout(() => {
        document.body.removeChild(loadingOverlay);
        showMoneTagAdOnly(type, () => {
            // Mone Tag ad completed - show 15-second timer before reward
            startRewardTimer(20, rewardPerAd, type);
        });
    }, 1500);
}

 // Simple Mone Tag Ad Function
function showMoneTagAdOnly(type, reward) {
    if (!currentUser || !userData) return;
    
    if (userData.dailyAdsWatched >= 15) {
        showNotification('আজ আপনি সর্বোচ্চ ১৫টি Ads দেখেছেন!', 'error');
        return;
    }
    
    // সরাসরি Mone Tag SDK কল করুন
    try {
        if (typeof show_8954258 === 'function') {
            // প্রথমে একটি লোডিং স্ক্রিন দেখান
            const loadingDiv = document.createElement('div');
            loadingDiv.className = 'fixed inset-0 bg-black z-50 flex items-center justify-center';
            loadingDiv.innerHTML = `
                <div class="text-center text-white">
                    <i class="fas fa-spinner fa-spin text-4xl mb-4"></i>
                    <p class="text-xl">Loading Mone Tag Ad...</p>
                    <p class="text-gray-400 mt-2">Please wait</p>
                </div>
            `;
            document.body.appendChild(loadingDiv);
            
            // 2 সেকেন্ড পর Ads শো করুন
            setTimeout(() => {
                document.body.removeChild(loadingDiv);
                
                // Mone Tag Ads শো করুন
                show_8954258();
                
                // Ads কমপ্লিট হলে রিওয়ার্ড দিন
                setTimeout(async () => {
                    try {
                        const updates = {};
                        updates['balance'] = (userData.balance || 0) + reward;
                        updates['totalEarnings'] = (userData.totalEarnings || 0) + reward;
                        updates['dailyAdsWatched'] = (userData.dailyAdsWatched || 0) + 1;
                        updates['lastAdsDate'] = new Date().toISOString();
                        
                        await database.ref('users/' + currentUser.uid).update(updates);
                        userData = { ...userData, ...updates };
                        updateUserInterface();
                        
                        showNotification(`Ads watched! ৳${reward} added to balance.`, 'success');
                        
                    } catch (error) {
                        console.error('Error:', error);
                        showNotification('Error processing reward.', 'error');
                    }
                }, 15000); // 15 সেকেন্ড পর রিওয়ার্ড
                
            }, 2000);
            
        } else {
            showNotification('Mone Tag Ads not available. Please try again later.', 'error');
        }
    } catch (error) {
        console.error('Mone Tag Error:', error);
        showNotification('Failed to load ads.', 'error');
    }
}
    
    // Show Mone Tag ad content
    function showMoneTagAdContent(container) {
        container.innerHTML = '';
        container.innerHTML = `
            <div class="w-full h-full bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex flex-col items-center justify-center p-6">
                <div class="text-center text-white mb-6">
                    <div class="w-24 h-24 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-ad text-3xl"></i>
                    </div>
                    <h2 class="text-3xl font-bold mb-2">MONE TAG</h2>
                    <p class="text-xl opacity-90">Premium Advertisement</p>
                    <div class="mt-4 inline-block bg-white/10 px-6 py-2 rounded-full">
                        <span class="text-lg font-bold">Zone: 8954258</span>
                    </div>
                </div>
                
                <div class="bg-black/30 rounded-2xl p-6 max-w-md w-full">
                    <div class="flex items-center justify-between mb-4">
                        <div class="flex items-center">
                            <div class="w-14 h-14 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center mr-4">
                                <i class="fas fa-gamepad text-white text-xl"></i>
                            </div>
                            <div>
                                <p class="font-bold text-lg">Fun Earning App</p>
                                <p class="text-sm text-gray-400">Play Games & Earn Money</p>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-lg font-bold">৳1000+</p>
                            <p class="text-xs text-gray-400">Daily Earnings</p>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <p class="text-sm text-gray-300 mb-3">Features:</p>
                        <div class="grid grid-cols-2 gap-3 text-sm">
                            <div class="flex items-center bg-white/5 p-2 rounded-lg">
                                <i class="fas fa-bolt text-yellow-400 mr-2"></i>
                                <span>Instant Withdrawal</span>
                            </div>
                            <div class="flex items-center bg-white/5 p-2 rounded-lg">
                                <i class="fas fa-gift text-pink-400 mr-2"></i>
                                <span>Daily Bonus</span>
                            </div>
                            <div class="flex items-center bg-white/5 p-2 rounded-lg">
                                <i class="fas fa-users text-green-400 mr-2"></i>
                                <span>Referral Income</span>
                            </div>
                            <div class="flex items-center bg-white/5 p-2 rounded-lg">
                                <i class="fas fa-headset text-blue-400 mr-2"></i>
                                <span>24/7 Support</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center">
                        <div class="text-lg mb-4">Earn money by:</div>
                        <div class="flex justify-center space-x-4 mb-6">
                            <div class="text-center">
                                <div class="w-12 h-12 rounded-full bg-blue-600 flex items-center justify-center mx-auto mb-2">
                                    <i class="fas fa-play"></i>
                                </div>
                                <p class="text-xs">Watch Ads</p>
                            </div>
                            <div class="text-center">
                                <div class="w-12 h-12 rounded-full bg-purple-600 flex items-center justify-center mx-auto mb-2">
                                    <i class="fas fa-tasks"></i>
                                </div>
                                <p class="text-xs">Complete Tasks</p>
                            </div>
                            <div class="text-center">
                                <div class="w-12 h-12 rounded-full bg-indigo-600 flex items-center justify-center mx-auto mb-2">
                                    <i class="fas fa-user-plus"></i>
                                </div>
                                <p class="text-xs">Invite Friends</p>
                            </div>
                        </div>
                        
                        <div class="mt-6">
                            <div class="text-sm text-gray-400 mb-2">This is a real Mone Tag advertisement</div>
                            <div class="text-xs text-gray-500">
                                Thank you for supporting our advertisers
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }
    
    // When user clicks complete
    completeBtn.addEventListener('click', () => {
        document.body.removeChild(adContainer);
        if (onComplete) onComplete();
    });
    
    
    
     Auto-complete after 10 seconds
    setTimeout(() => {
        if (document.body.contains(adContainer)) {
            document.body.removeChild(adContainer);
            if (onComplete) onComplete();
        }
    }, 10000);
}



// Start 15-second timer before reward
function startRewardTimer(seconds, reward, type) {
    const timerOverlay = document.createElement('div');
    timerOverlay.className = 'fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50';
    timerOverlay.innerHTML = `
        <div class="bg-gradient-to-br from-blue-900 to-purple-900 rounded-3xl p-8 max-w-md w-full mx-4 shadow-2xl text-center">
            <div class="w-32 h-32 rounded-full bg-gradient-to-r from-green-500 to-emerald-600 flex items-center justify-center mx-auto mb-6 animate-pulse">
                <i class="fas fa-clock text-white text-5xl"></i>
            </div>
            
            <h2 class="text-3xl font-bold text-white mb-4">Processing Reward</h2>
            <p class="text-gray-300 mb-6">Please wait while we process your reward...</p>
            
            <div class="mb-8">
                <div class="text-6xl font-bold text-white mb-2" id="timerCountdown">${seconds}</div>
                <p class="text-gray-400">seconds remaining</p>
            </div>
            
            <div class="bg-black/30 rounded-2xl p-6 mb-6">
                <div class="flex items-center justify-center mb-4">
                    <div class="w-16 h-16 rounded-full bg-gradient-to-r from-yellow-500 to-orange-500 flex items-center justify-center mr-4">
                        <i class="fas fa-coins text-white text-2xl"></i>
                    </div>
                    <div class="text-left">
                        <p class="text-gray-400 text-sm">You will receive</p>
                        <p class="text-3xl font-bold text-white">৳${reward}</p>
                    </div>
                </div>
                <p class="text-gray-400 text-sm">After timer completes, amount will be added to your balance</p>
            </div>
            
            <div class="w-full bg-gray-700 rounded-full h-3 mb-2">
                <div id="timerProgress" class="bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full" style="width: 100%"></div>
            </div>
            <p class="text-gray-400 text-sm">Please don't close the app</p>
        </div>
    `;
    
    document.body.appendChild(timerOverlay);
    
    let timeLeft = seconds;
    const timerDisplay = timerOverlay.querySelector('#timerCountdown');
    const progressBar = timerOverlay.querySelector('#timerProgress');
    
    const timerInterval = setInterval(() => {
        timeLeft--;
        
        // Update display
        timerDisplay.textContent = timeLeft;
        
        // Update progress bar
        const progressPercent = (timeLeft / seconds) * 100;
        progressBar.style.width = `${progressPercent}%`;
        
        // Change color when near end
        if (timeLeft <= 5) {
            progressBar.className = 'bg-gradient-to-r from-red-500 to-orange-500 h-3 rounded-full';
        } else if (timeLeft <= 10) {
            progressBar.className = 'bg-gradient-to-r from-yellow-500 to-orange-500 h-3 rounded-full';
        }
        
        // Timer finished
        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            document.body.removeChild(timerOverlay);
            
            // Give reward after timer completes
            completeSingleAd(reward, type);
            
            // Show success message
            showNotification(`Congratulations! ৳${reward} has been added to your balance.`, 'success');
        }
    }, 1000);
    
    // Allow user to close timer (optional)
    setTimeout(() => {
        timerOverlay.addEventListener('click', (e) => {
            if (e.target === timerOverlay) {
                clearInterval(timerInterval);
                document.body.removeChild(timerOverlay);
                showNotification('Timer cancelled. Reward not added.', 'warning');
            }
        });
    }, 500);
}

// Complete Single Ad (Mone Tag Only)
async function completeSingleAd(reward, type) {
    try {
        // Update user data
        const updates = {};
        updates['balance'] = (userData.balance || 0) + reward;
        updates['totalEarnings'] = (userData.totalEarnings || 0) + reward;
        updates['dailyAdsWatched'] = (userData.dailyAdsWatched || 0) + 1; // 1 ad watched
        updates['lastAdsDate'] = new Date().toISOString();
        
        await database.ref('users/' + currentUser.uid).update(updates);
        
        // Update local user data
        userData = { ...userData, ...updates };
        
        // Update UI
        updateUserInterface();
        
    } catch (error) {
        console.error('Error completing ad:', error);
        showNotification('Error processing ad reward. Please try again.', 'error');
    }
}
        // Copy Referral Link
        function copyReferralLink() {
            navigator.clipboard.writeText(elements.referralLink.value)
                .then(async () => {
                    // Add ৳20 reward for sharing referral link
                    try {
                        const reward = 20;
                        
                        const updates = {};
                        updates['balance'] = (userData.balance || 0) + reward;
                        updates['totalEarnings'] = (userData.totalEarnings || 0) + reward;
                        updates['totalReferralEarnings'] = (userData.totalReferralEarnings || 0) + reward;
                        
                        await database.ref('users/' + currentUser.uid).update(updates);
                        
                        // Update local user data
                        userData = { ...userData, ...updates };
                        
                        // Update UI
                        updateUserInterface();
                        
                        showNotification('Referral link copied to clipboard! +৳20 earned for sharing.', 'success');
                    } catch (error) {
                        console.error('Error adding referral share reward:', error);
                        showNotification('Referral link copied to clipboard!', 'success');
                    }
                })
                .catch(err => {
                    console.error('Failed to copy: ', err);
                    showNotification('Failed to copy link. Please try again.', 'error');
                });
        }

        // Share Referral Link
        function shareReferralLink() {
            if (navigator.share) {
                navigator.share({
                    title: 'Daily Earning - Earn Money Online',
                    text: 'Join Daily Earning and start earning money by completing simple tasks!',
                    url: elements.referralLink.value
                })
                .then(async () => {
                    // Add ৳20 reward for sharing referral link
                    try {
                        const reward = 20;
                        
                        const updates = {};
                        updates['balance'] = (userData.balance || 0) + reward;
                        updates['totalEarnings'] = (userData.totalEarnings || 0) + reward;
                        updates['totalReferralEarnings'] = (userData.totalReferralEarnings || 0) + reward;
                        
                        await database.ref('users/' + currentUser.uid).update(updates);
                        
                        // Update local user data
                        userData = { ...userData, ...updates };
                        
                        // Update UI
                        updateUserInterface();
                        
                        showNotification('Thanks for sharing! +৳20 earned.', 'success');
                    } catch (error) {
                        console.error('Error adding referral share reward:', error);
                        showNotification('Thanks for sharing!', 'success');
                    }
                })
                .catch(err => console.error('Error sharing:', err));
            } else {
                copyReferralLink();
            }
        }

        // Toggle Password Visibility
        function togglePasswordVisibility(passwordFieldId, toggleButton) {
            const passwordField = document.getElementById(passwordFieldId);
            const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordField.setAttribute('type', type);
            
            // Toggle eye icon
            const icon = toggleButton.querySelector('i');
            if (type === 'text') {
                icon.className = 'fas fa-eye-slash';
            } else {
                icon.className = 'fas fa-eye';
            }
        }

        // Generate Random Referral Link
        function generateRandomReferralLink() {
            const baseUrl = 'https://daily-earne.vercel.app';
            const randomId = Math.random().toString(36).substring(2, 10).toUpperCase();
            const referralCode = `ref_${randomId}`;
            const referralLink = `${baseUrl}/?ref=${referralCode}`;
            
            // Update referral link input
            if (elements.referralLink) {
                elements.referralLink.value = referralLink;
            }
        }

        // Update Theme Icon
        function updateThemeIcon(isDark) {
            const icon = elements.themeToggle.querySelector('i');
            
            if (isDark) {
                icon.className = 'fas fa-sun text-yellow-400';
                elements.themeToggle.title = 'Switch to light mode';
            } else {
                icon.className = 'fas fa-moon text-gray-600';
                elements.themeToggle.title = 'Switch to dark mode';
            }
        }

        // Toggle Theme
        function toggleTheme() {
            const isDark = document.body.classList.toggle('dark');
            
            // Save theme preference
            localStorage.setItem('dailyEarningTheme', isDark ? 'dark' : 'light');
            
            // Update icon
            updateThemeIcon(isDark);
            
            showNotification(`Switched to ${isDark ? 'dark' : 'light'} mode`, 'info');
        }

// Claim Daily Bonus
async function claimDailyBonus() {
    if (!currentUser || !userData) return;
    
    const today = new Date().toDateString();
    const lastBonusDate = userData.lastDailyBonus ? new Date(userData.lastDailyBonus).toDateString() : null;
    
    if (lastBonusDate === today) {
        showNotification('আপনি আজকের Daily Bonus ইতিমধ্যে নিয়ে নিয়েছেন! আগামীকাল আবার চেষ্টা করুন।', 'error');
        return;
    }
    
    try {
        const reward = 1;
        
        const updates = {};
        updates['balance'] = (userData.balance || 0) + reward;
        updates['totalEarnings'] = (userData.totalEarnings || 0) + reward;
        updates['lastDailyBonus'] = new Date().toISOString();
        
        // Streak update
        const yesterday = new Date();
        yesterday.setDate(yesterday.getDate() - 1);
        const yesterdayString = yesterday.toDateString();
        
        if (lastBonusDate === yesterdayString) {
            updates['streak'] = (userData.streak || 0) + 1;
        } else if (!lastBonusDate) {
            updates['streak'] = 1;
        } else {
            updates['streak'] = 1;
        }
        
        await database.ref('users/' + currentUser.uid).update(updates);
        
        // Update local user data
        userData = { ...userData, ...updates };
        
        // Update UI
        updateUserInterface();
        
        showNotification(`Daily Bonus! ৳${reward} has been added to your balance. Streak: ${updates['streak']} days`, 'success');
        
    } catch (error) {
        console.error('Error claiming daily bonus:', error);
        showNotification('Error claiming daily bonus. Please try again.', 'error');
    }
}

        // Show Notification
        function showNotification(message, type = 'info') {
            elements.notificationText.innerHTML = message;
            
            // Set notification color based on type
            const notificationDiv = elements.notification.querySelector('div');
            notificationDiv.className = 'text-white p-4 rounded-xl shadow-lg flex items-center notification-slide';
            
            switch(type) {
                case 'success':
                    notificationDiv.classList.add('bg-gradient-to-r', 'from-green-500', 'to-emerald-600');
                    break;
                case 'error':
                    notificationDiv.classList.add('bg-gradient-to-r', 'from-red-500', 'to-pink-600');
                    break;
                case 'warning':
                    notificationDiv.classList.add('bg-gradient-to-r', 'from-yellow-500', 'to-orange-600');
                    break;
                default:
                    notificationDiv.classList.add('bg-gradient-to-r', 'from-blue-500', 'to-indigo-600');
            }
            
            elements.notification.classList.remove('hidden');
            
            // Auto hide after 3 seconds
            setTimeout(() => {
                elements.notification.classList.add('hidden');
            }, 3000);
        }
    </script>
</body>
</html>
